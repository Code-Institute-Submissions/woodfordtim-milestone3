{% extends 'base.html' %} {% block content %}

<div class="container">
	<div class="row">
		<div class="col s12">

			<!-- Using the JS replace method:  https://www.w3schools.com/jsref/jsref_replace.asp -->
			<h2 class="title-text">{{event.event_name|replace('_', ' ')}}</h2>

			<!-- Events description (full width card from Materialize) -->
			<div class="card horizontal">
				<div class="card-stacked">
					<div class="card-content">
						<h3><strong>Event Description</strong></h3>
						<p>{{event.description}}</p>
					</div>
					<div class="card-action blue-text">
						<a href="{{event.link}}">Find out more</a>
					</div>
				</div>
				<div class="card-image">
					{% if event.img_url %}
					<img class="user-image" src="{{event.img_url}}" alt="user selected hike image">
                            {% else %}
					<img class="user-image" src ="data:image/jpeg;base64,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">
                        {% endif %}
                </div>
			</div>

            <!-- Events information (half-width) -->
            <div class="row">
                <div class="col s12 m6">
                    <div class="card-panel">

                        <h3><strong>Event Information</strong></h3>

                        <!-- Event Date -->
                        {% if event.event_date %}
                        <p><strong>Event Date:</strong> {{event.event_date}}</p>
                        {% else %}
                        <p><strong>Event Date:</strong> Unknown</p>
                        {% endif %}

                        <!-- Event Sport-->
                        {% if event.sport_name %}
                        <p><strong>Sport:</strong> {{event.sport_name}}</p>
                        {% else %}
                        <p><strong>Sport</strong> Unknown</p>
                        {% endif %}

                        <!-- Event Distance -->
                        {% if event.distances %}
                        <p><strong>Distance:</strong> {{event.distances}}/5</p>
                        {% else %}
                        <p><strong>Distance:</strong> Unknown</p>
                        {% endif %}

                        <!-- Event loaction -->
                        {% if event.location %}
                        <p><strong>Loaction:</strong> {{event.location }}</p>
                        {% else %}
                        <p><strong>Loaction:</strong> Unknown</p>
                        {% endif %}

                        <!-- Event Coordinates -->
                        <p><strong>Coordinates:</strong> {{event.event_coordinates}}</p>

                    </div>
                </div>

                <!-- Events contacts (half-width) -->
                <div class="col s12 m6">
                    <div class="card-panel">

                        <h3><strong>Event Contacts</strong></h3>

                        <!-- Event Email -->
                        {% if event.event_contacts %}
                        <p><strong>Email:</strong> {{event.event_contacts}}</p>
                        {% else %}
                        <p><strong>Email:</strong> Unknown</p>
                        {% endif %}

                        <!-- Website -->
                        {% if event.link %}
                        <p><strong>Web:</strong> {{event.link}}</p>
                        {% else %}
                        <p><strong>Web:</strong> Unknown</p>
                        {% endif %}

                    </div>
                </div>
            </div>
		</div>

		<!-- Events map -->
        <div class="col s12">
            <div id="{{event.event_name}}" class="mini_map"></div>
            <div id="mapid" class="maps"></div>
        </div>

        <!-- Buttons -->
        <div class="row">
            <div class="col s12 center-align">
                <div>
                    <a href="{{ url_for('edit_event', event_id=event._id) }}"
                        class="waves-effect waves-light btn btn_small edit_button">Edit</a>
                    <a href="{{ url_for('delete_event', event_id=event._id) }}"
                        onclick="return confirm('Are you sure you want to delete this hike?');"
                        class="waves-effect waves-light btn btn_small delete_button">Delete</a>
                    <a href="{{ url_for('find_events') }}"
                        class="waves-effect waves-light btn btn_small view_button">Back</a>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block js %}
<script>
	var eventName = {{event.event_name|replace(' ', '_')}};

		    var mapTileLayers{{event.event_name|replace(' ', '_')}} = L.tileLayer("http://services.arcgisonline.com/arcgis/rest/      services/World_Street_Map/MapServer/tile/{z}/{y}/{x}", {
                attribution: "Powered by <a href='https://developers.arcgis.com/terms/attribution/' target='_blank' rel='noopener'>Esri</a>"
            });


            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors,   <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://   www.mapbox.com/">Mapbox</a>',
       
        eventName = L.map("{{event.event_name|replace(' ', '_')}}", {
            layers: [mapTileLayers{{event.event_name|replace(' ', '_')}}],
            center: [{{event.event_coordinates}}],
            zoom: 12
        });

        var zoom_marker = L.marker([{{event.event_coordinates}}]).addTo(eventName);
</script>

{% endblock %}